"use strict";var __decorate=this&&this.__decorate||function(a,e,s,r){var t,n=arguments.length,o=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(a,e,s,r);else for(var i=a.length-1;i>=0;i--)(t=a[i])&&(o=(n<3?t(o):n>3?t(e,s,o):t(e,s))||o);return n>3&&o&&Object.defineProperty(e,s,o),o},__metadata=this&&this.__metadata||function(a,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,e)},core_1=require("@angular/core"),classes_1=require("./classes"),ColorPickerService=function(){function a(){}return a.prototype.hsla2hsva=function(a){var e=Math.min(a.h,1),s=Math.min(a.s,1),r=Math.min(a.l,1),t=Math.min(a.a,1);if(0===r)return new classes_1.Hsva(e,0,0,t);var n=r+s*(1-Math.abs(2*r-1))/2;return new classes_1.Hsva(e,2*(n-r)/n,n,t)},a.prototype.hsva2hsla=function(a){var e=a.h,s=a.s,r=a.v,t=a.a;if(0===r)return new classes_1.Hsla(e,0,0,t);if(0===s&&1===r)return new classes_1.Hsla(e,1,1,t);var n=r*(2-s)/2;return new classes_1.Hsla(e,r*s/(1-Math.abs(2*n-1)),n,t)},a.prototype.rgbaToHsva=function(a){var e,s,r=Math.min(a.r,1),t=Math.min(a.g,1),n=Math.min(a.b,1),o=Math.min(a.a,1),i=Math.max(r,t,n),c=Math.min(r,t,n),h=i,l=i-c;if(s=0===i?0:l/i,i===c)e=0;else{switch(i){case r:e=(t-n)/l+(t<n?6:0);break;case t:e=(n-r)/l+2;break;case n:e=(r-t)/l+4}e/=6}return new classes_1.Hsva(e,s,h,o)},a.prototype.hsvaToRgba=function(a){var e,s,r,t=a.h,n=a.s,o=a.v,i=a.a,c=Math.floor(6*t),h=6*t-c,l=o*(1-n),u=o*(1-h*n),f=o*(1-(1-h)*n);switch(c%6){case 0:e=o,s=f,r=l;break;case 1:e=u,s=o,r=l;break;case 2:e=l,s=o,r=f;break;case 3:e=l,s=u,r=o;break;case 4:e=f,s=l,r=o;break;case 5:e=o,s=l,r=u}return new classes_1.Rgba(e,s,r,i)},a.prototype.stringToHsva=function(a,e){void 0===a&&(a=""),void 0===e&&(e=!1);var s=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new classes_1.Rgba(parseInt(a[2])/255,parseInt(a[3])/255,parseInt(a[4])/255,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new classes_1.Hsla(parseInt(a[2])/360,parseInt(a[3])/100,parseInt(a[4])/100,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}}];e?s.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(a){return new classes_1.Rgba(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,parseInt(a[4],16)/255)}}):s.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(a){return new classes_1.Rgba(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,1)}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(a){return new classes_1.Rgba(parseInt(a[1]+a[1],16)/255,parseInt(a[2]+a[2],16)/255,parseInt(a[3]+a[3],16)/255,1)}}),a=a.toLowerCase();var r=null;for(var t in s)if(s.hasOwnProperty(t)){var n=s[t],o=n.re.exec(a),i=o&&n.parse(o);if(i)return i instanceof classes_1.Rgba?r=this.rgbaToHsva(i):i instanceof classes_1.Hsla&&(r=this.hsla2hsva(i)),r}return r},a.prototype.outputFormat=function(a,e,s){if(a.a<1)switch(e){case"hsla":var r=this.hsva2hsla(a),t=new classes_1.Hsla(Math.round(360*r.h),Math.round(100*r.s),Math.round(100*r.l),Math.round(100*r.a)/100);return"hsla("+t.h+","+t.s+"%,"+t.l+"%,"+t.a+")";default:if(s&&"hex"===e)return this.hexText(this.denormalizeRGBA(this.hsvaToRgba(a)),s);var n=this.denormalizeRGBA(this.hsvaToRgba(a));return"rgba("+n.r+","+n.g+","+n.b+","+Math.round(100*n.a)/100+")"}else switch(e){case"hsla":var r=this.hsva2hsla(a),t=new classes_1.Hsla(Math.round(360*r.h),Math.round(100*r.s),Math.round(100*r.l),Math.round(100*r.a)/100);return"hsl("+t.h+","+t.s+"%,"+t.l+"%)";case"rgba":var n=this.denormalizeRGBA(this.hsvaToRgba(a));return"rgb("+n.r+","+n.g+","+n.b+")";default:return this.hexText(this.denormalizeRGBA(this.hsvaToRgba(a)),s)}},a.prototype.hexText=function(a,e){var s="#"+(1<<24|a.r<<16|a.g<<8|a.b).toString(16).substr(1);return s[1]!==s[2]||s[3]!==s[4]||s[5]!==s[6]||1!==a.a||e||(s="#"+s[1]+s[3]+s[5]),e&&(s+=(256|Math.round(255*a.a)).toString(16).substr(1)),s},a.prototype.denormalizeRGBA=function(a){return new classes_1.Rgba(Math.round(255*a.r),Math.round(255*a.g),Math.round(255*a.b),a.a)},a}();ColorPickerService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],ColorPickerService),exports.ColorPickerService=ColorPickerService;